<!DOCTYPE html>
<html>
    <head>
        <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='topbar.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='search.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='root.css') }}">
    </head>
    <body>
        <div class="rvideo_topbar">
            <!-- Logo block  -->
            <a href="/" class="rvideo_logo">
                <img class="rvideo_logo_img" src="{{ url_for('static', filename='favicon.ico') }}">
                <p class="rvideo_logo_text">RVIDEO</p>
            </a>
            
            <!-- Search block  -->
            <div id="advanced" class="search">
                <form action="/">
                    <div  class="search_normal" >

                        <a class="search_hide_advanced" href="#">↑</a>
                        <a class="search_show_advanced" href="#advanced">↓</a>
                        
                        <input class="search_bar" type="text" name="SEARCH" value="{{ searches.SEARCH }}">
                        <input type="submit" value="search">
                    </div>

                    <div class="search_advanced">
                        <div class="search_advanced_item">
                            <input id="selector" class="search_date" type="checkbox" name="AFTER" {{ searches.AFTER }}>
                            <p class="search_date_before">before:</p>
                            <p class="search_date_after">after:</p>
                            <input style="display: inline;" type="date" name="DATE" value="{{ searches.DATE }}">
                        </div>
                        <div class="search_advanced_item">
                            <p style="display: inline;">users:</p>
                            <input class="search_user" type="text" name="USERS" value="{{ searches.USERS }}">
                        </div>
                        <div class="search_advanced_item">
                            <p style="display: inline;">tags:</p>
                            <input class="search_user" type="text" name="TAGS" value="{{ searches.TAGS }}">
                        </div>
                            <div class="search_advanced_item">
                            <p style="display: inline;">page:</p>
                            <input class="search_user" type="number" name="PAGE" value="{{ searches.PAGE }}">
                        </div>
                    </div>
                </form>
            </div>
        
            {% if account %}
            <div style="display: flex; margin-top: auto; margin-bottom: auto; margin-right: 10px;">
                <a style="text-decoration: none;" href="video">
                    <p style="font-size: 2vw;">+</p>
                </a>
            </div>
            <div class="rvideo_account">
                <a style="text-decoration: none;" href="account?page={{ account.pid }}">
                    <img class="rvideo_account_image" src="account?picture={{ account.pid }}">
                    <p class="rvideo_account_text">{{ account.username }}</p>
                </a>
            </div>
            {% else %}
            <div class="rvideo_login">
                <a style="text-decoration: none;" href="login">
                    <p class="rvideo_login_text">Login</p>
                </a>
                <a style="text-decoration: none;" href="account">
                    <p style="color: black;">account search</p>
                </a>
            </div>
            {% endif %}
        </div>
        
        <div class="video_grid">
            {% for video in videos %}
            <div class="video_item">
                {% if video.private == 1 %}
                <a href="video?view={{ account.pid }}_{{ video.vid }}">
                    <!-- figure out how to properly resize -->
                    <video height="100vw">
                        <source src="video?stream={{ account.pid }}_{{ video.vid }}">
                    </video>
                    <p class="video_item_text">{{ video.name }}</p>
                </a>
                {% else %}
                <a href="video?view={{ video.vid }}">
                    <!-- figure out how to properly resize -->
                    <video height="100vw">
                        <source src="video?stream={{ video.vid }}">
                    </video>
                    <p class="video_item_text">{{ video.name }}</p>
                </a>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </body>
</html>